<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>카테고리 선택</title>
  <style>
    .form-container {
      width: 500px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
    }
    label, select, input {
      display: block;
      margin-bottom: 10px;
      width: 100%;
    }
    .btn-green {
      background-color: #28a745;
      color: #fff;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h1>카테고리 선택</h1>
    <% if(error) { %>
      <p style="color:red;"><%= error %></p>
    <% } %>
    <form action="/insight/category" method="POST">
      <!-- 검색 입력란 -->
    <label for="categorySearch">카테고리 검색</label>
    <div style="display: flex; gap: 8px;">
      <input type="text" id="categorySearch" placeholder="예: 쌈채소" style="flex:1;" />
      <button type="button" id="searchBtn" class="btn-green">입력하기</button>
    </div>


      <!-- 카테고리 드롭다운 -->
      <label for="largeCategory">대분류</label>
      <select id="largeCategory" name="대분류" required>
        <option value="">선택하세요</option>
      </select>
      
      <label for="midCategory">중분류</label>
      <select id="midCategory" name="중분류">
        <option value="">선택하세요</option>
      </select>
      
      <label for="smallCategory">소분류</label>
      <select id="smallCategory" name="소분류">
        <option value="">선택하세요</option>
      </select>
      
      <label for="subCategory">세분류</label>
      <select id="subCategory" name="세분류">
        <option value="">선택하세요</option>
      </select>
      
      <!-- 최종 선택된 카테고리 번호를 저장할 숨은 필드 -->
      <input type="hidden" id="categoryCode" name="categoryCode">
      <input type="hidden" id="categoryName" name="categoryName">
      
      <!-- 조회 기간 및 시간 단위 입력 필드 -->
      <label for="period">조회 기간:</label>
      <select name="period" id="period">
        <option value="1month" selected>최근 1개월</option>
        <option value="3months">최근 3개월</option>
        <option value="6months">최근 6개월</option>
        <option value="1year">최근 1년</option>
      </select>
      <input type="hidden" name="startDate" id="startDate">
      <input type="hidden" name="endDate" id="endDate">
      
      <label for="timeUnit">시간 단위:</label>
      <select name="timeUnit" id="timeUnit">
        <option value="date">일</option>
        <option value="week">주</option>
        <option value="month" selected>월</option>
      </select>
      
      <button class="btn-green" type="submit">조회</button>
    </form>
  </div>
  
  <!-- 자바스크립트 파일을 public/js/insightCategory.js에서 로드 -->
  <script src="/js/insightCategory.js"></script>
</body>
</html>
